#### 类型体操

> 虽然我不知道以后公司会不会用 ts 来写代码,但是我还是想学习一下

> infer 关键字练习

1.获取 promise 里面的值

```js
type P = Promise<'pending'>;

type GetPromiseValue<T> = T extends Promise<infer Value> ? Value : never;

const a: GetPromiseValue<P> = 'pending';
```

2.提取数组第一个元素类型

```js
// 提取数组的第一个元素类型
type arr = [1, 2, 3];

// 第一个extends是类型约束 后面的 extends ?　: 是
type GetFirstType<T extends unknown[]> = T extends [infer Value, ...unknown[]] ? Value : never;

const a: GetFirstType<arr> = 1;
```

3.提取数组最后一个元素类型

```js
type arr = [1, 2, 3];

type GetLastType<T extends unknown[]> = T extends [...unknown[], infer Value] ? Value : never;

const a: GetLastType<arr> = 3;
```

4.取剩余部分的元素类型

```js
type arr = [1, 2, 3];

type GetArgsType<T extends unknown[]> = T extends [...infer Value, unknown] ? Value : never;

const a: GetArgsType<arr> = [1, 2];
```

5.取剩余部分的元素类型

```js
type arr = [1, 2, 3];

type GetArgsType<T extends unknown[]> = T extends [any, ...infer Value] ? Value : never;

const a: GetArgsType<arr> = [2, 3];
```

6.字符串第一个开头

```js
type StartWith<Str extends string, SubStr extends string> = Str extends `${SubStr}${string}`
? true
: false;

const a: StartWith<'abcde', 'a'> = true;
```

字符串最后一个开头

```js
type EndWith<Str extends string, SubStr extends string> = Str extends `${string}${SubStr}`
? true
: false;

const a: EndWith<'abcde', 'e'> = true;
```

8. 替换字符串

```js
type Replace<
Str extends string,
From extends string,
To extends string

> = Str extends `${infer A}${From}${infer B}` ? `${A}${To}${B}` : never;

const a:Replace<"abcde", 'b', 'n'> = 'ancde'
```

9. 替换空格

```js
// 替换右空格 有一个递归的过程
type TrimRight<Str extends string> = Str extends `${infer Rest}${' ' | '\n' | '\t'}`
? TrimRight<Rest>
: Str;

// const a: TrimRight<'asdf asf asf sdf '> = 'asdf asf asf sdf';

// 替换左空格 有一个递归的过程
type TrimLeft<Str extends string> = Str extends `${' ' | '\n' | '\t'}${infer Rest}`
? TrimLeft<Rest>
: Str;

// const a: TrimLeft<' asdf asf asf sdf'> = 'asdf asf asf sdf';

// 1替换两边空格
type tirm<Str extends string> = TrimLeft<TrimRight<Str>>;
```

11.函数也可以提取类型

```js
type GetParameters<Func extends Function> = Func extends (...args: infer Args) => unknown
? Args
: never;

type func = (a: string, b: string) => any;

const a: GetParameters<func> = ['1', '2'];
```

12.获取函数返回值类型

```js
    type GetReturnType<Func extends Function> = Func extends (...args: any[]) => infer ReturnType
    ? ReturnType
    : never;

type func = (a: string, b: string) => string;

const a: GetReturnType<func> = 'a';

```
